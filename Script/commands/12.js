const schedule = require('node-schedule');
const axios = require('axios');
const moment = require('moment-timezone');

module.exports.config = {
  name: 'autosent',
  version: '25.0.0',
  hasPermssion: 0,
  credits: 'Ã‚ÃŸhrÃ¥fÃ¹l ÃŽÃŸlÄm x Gemini',
  description: 'à¦ªà¦¾à¦“à§Ÿà¦¾à¦°à¦«à§à¦² à¦¶à¦°à§à¦Ÿ à¦†à¦ªà¦¡à§‡à¦Ÿ + à¦¬à§à¦¯à¦¾à¦Ÿà¦¾à¦°à¦¿ à¦“ à¦†à¦ªà¦Ÿà¦¾à¦‡à¦®',
  commandCategory: 'system',
  usages: '[]',
  cooldowns: 2
};

const quotes = {
  0: "à¦®à¦§à§à¦¯à¦°à¦¾à¦¤: à¦¨à¦¿à¦¸à§à¦¤à¦¬à§à¦§ à¦ªà§ƒà¦¥à¦¿à¦¬à§€à¦¤à§‡ 'à¦šà¦¾à¦à¦¦à§‡à¦° à¦ªà¦¾à¦¹à¦¾à§œ' à¦†à¦ªà¦¨à¦¾à¦° à¦…à¦¤à¦¨à§à¦¦à§à¦° à¦ªà§à¦°à¦¹à¦°à§€! ðŸŒ™",
  1: "à¦°à¦¾à¦¤ à§§à¦Ÿà¦¾: à¦¨à¦¿à¦°à§à¦œà¦¨à¦¤à¦¾ à¦¨à¦¤à§à¦¨ à¦¸à§à¦¬à¦ªà§à¦¨à§‡à¦° à¦¬à§€à¦œ à¦¬à¦ªà¦¨ à¦•à¦°à§‡à¥¤ à¦¶à§à¦­ à¦°à¦¾à¦¤à§à¦°à¦¿à¥¤ âœ¨",
  2: "à¦°à¦¾à¦¤ à§¨à¦Ÿà¦¾: à¦¤à¦¾à¦°à¦¾à¦° à¦®à§‡à¦²à¦¾à§Ÿ à¦¸à§à¦¬à¦ªà§à¦¨à¦—à§à¦²à§‹ à¦¡à¦¾à¦¨à¦¾ à¦®à§‡à¦²à§à¦• à¦¬à¦¸à§‡à¦° à¦›à¦¾à§Ÿà¦¾à§Ÿà¥¤ ðŸ’¤",
  3: "à¦°à¦¾à¦¤ à§©à¦Ÿà¦¾: à¦¶à§‡à¦· à¦°à¦¾à¦¤à§‡à¦° à¦ªà§à¦°à¦¾à¦°à§à¦¥à¦¨à¦¾ à¦†à¦¤à§à¦®à¦¾à¦° à¦ªà¦°à¦® à¦ªà§à¦°à¦¶à¦¾à¦¨à§à¦¤à¦¿à¥¤ ðŸ¤²",
  4: "à¦­à§‹à¦° à§ªà¦Ÿà¦¾: à¦…à¦¨à§à¦§à¦•à¦¾à¦°à§‡à¦° à¦¶à§‡à¦·à§‡à¦‡ à¦†à¦²à§‹à¦° à¦¨à¦¤à§à¦¨ à¦®à¦¿à¦›à¦¿à¦²à§‡ à¦¸à§à¦¬à¦¾à¦—à¦¤à¦®à¥¤ ðŸŒ…",
  5: "à¦­à§‹à¦° à§«à¦Ÿà¦¾: à¦¸à§à¦¨à¦¿à¦—à§à¦§ à¦¸à¦•à¦¾à¦²à§‡à¦° à¦°à¦¾à¦œà¦•à§€à§Ÿ à¦¸à§à¦ªà¦°à§à¦¶à§‡ à¦¦à¦¿à¦¨à¦Ÿà¦¿ à¦°à¦™à¦¿à¦¨ à¦¹à§‹à¦•à¥¤ ðŸŒ¸",
  6: "à¦¸à¦•à¦¾à¦² à§¬à¦Ÿà¦¾: à¦¸à§‹à¦¨à¦¾à¦²à§€ à¦†à¦­à¦¾ à¦†à¦ªà¦¨à¦¾à¦° à¦œà§€à¦¬à¦¨à§‡ à¦†à¦­à¦¿à¦œà¦¾à¦¤à§à¦¯ à¦¨à¦¿à§Ÿà§‡ à¦†à¦¸à§à¦•à¥¤ â˜€ï¸",
  7: "à¦¸à¦•à¦¾à¦² à§­à¦Ÿà¦¾: à¦¨à¦¤à§à¦¨ à¦‰à¦¦à§à¦¯à¦®à§‡ à¦¦à¦¿à¦¨à¦Ÿà¦¿ à¦¶à§à¦°à§ à¦¹à§‹à¦• à¦¦à¦¾à¦ªà¦Ÿà§‡à¦° à¦¸à¦¾à¦¥à§‡à¥¤ â˜•ðŸ”¥",
  8: "à¦¸à¦•à¦¾à¦² à§®à¦Ÿà¦¾: à¦¸à¦®à§Ÿà§‡à¦° à¦¸à§à¦°à§‹à¦¤à§‡ à¦¨à¦¿à¦œà§‡à¦•à§‡ à¦‰à¦œà¦¾à§œ à¦•à¦°à§‡ à¦¦à¦¿à¦¨, à¦œà§Ÿ à¦¨à¦¿à¦¶à§à¦šà¦¿à¦¤à¥¤ â±ï¸",
  9: "à¦¸à¦•à¦¾à¦² à§¯à¦Ÿà¦¾: à¦¬à§à¦¯à¦¸à§à¦¤à¦¤à¦¾à¦° à¦®à¦¾à¦à§‡à¦“ 'à¦šà¦¾à¦à¦¦à§‡à¦° à¦ªà¦¾à¦¹à¦¾à§œ' à¦†à¦ªà¦¨à¦¾à¦° à¦ªà¦¾à¦¶à§‡ à¦†à¦›à§‡à¥¤ ðŸ›°ï¸",
  10: "à¦¸à¦•à¦¾à¦² à§§à§¦à¦Ÿà¦¾: à¦ à§‹à¦à¦Ÿà§‡à¦° à¦•à§‹à¦£à§‡ à¦¹à¦¾à¦¸à¦¿ à¦°à§‡à¦–à§‡ à¦œà§Ÿà§‡à¦° à¦¨à§‡à¦¶à¦¾à§Ÿ à¦®à§‡à¦¤à§‡ à¦‰à¦ à§à¦¨à¥¤ ðŸ˜Š",
  11: "à¦¸à¦•à¦¾à¦² à§§à§§à¦Ÿà¦¾: à¦°à§‹à¦¦ à¦¬à¦¾à§œà¦›à§‡, à¦¸à¦¾à¦¥à§‡ à¦¬à¦¾à§œà¦›à§‡ à¦†à¦ªà¦¨à¦¾à¦° à¦¸à¦«à¦²à¦¤à¦¾à¦° à¦¤à§‡à¦œà¥¤ ðŸ‘‘",
  12: "à¦¦à§à¦ªà§à¦° à§§à§¨à¦Ÿà¦¾: à¦®à¦§à§à¦¯à¦—à¦—à¦£à§‡ à¦¸à§‚à¦°à§à¦¯à§‡à¦° à¦®à¦¤à§‹ à¦‰à¦œà§à¦œà§à¦¬à¦² à¦¥à¦¾à¦•à§à¦• à¦†à¦ªà¦¨à¦¾à¦° à¦®à§‡à¦§à¦¾à¥¤ ðŸ’Ž",
  13: "à¦¦à§à¦ªà§à¦° à§§à¦Ÿà¦¾: à¦²à¦¾à¦žà§à¦š à¦¬à§à¦°à§‡à¦•! à¦ªà§‡à¦Ÿ à¦ªà§à¦œà§‹à¦Ÿà¦¾ à¦¹à§‹à¦• à¦à¦•à¦¦à¦® à¦°à¦¾à¦œà¦•à§€à§Ÿà¥¤ ðŸ±",
  14: "à¦¦à§à¦ªà§à¦° à§¨à¦Ÿà¦¾: à¦…à¦¬à¦¸à¦¾à¦¦ à¦à§‡à§œà§‡ à¦²à¦•à§à¦·à§à¦¯à§‡ à¦…à¦¬à¦¿à¦šà¦² à¦¥à¦¾à¦•à¦¾à¦° à¦¸à¦¾à¦¹à¦¸ à¦ªà¦¾à¦¨à¥¤ ðŸš€",
  15: "à¦¬à¦¿à¦•à§‡à¦² à§©à¦Ÿà¦¾: à¦ªà§œà¦¨à§à¦¤ à¦°à§‹à¦¦à§‡ à¦†à¦ªà¦¨à¦¾à¦° à¦®à¦¨à§‡à¦° à¦•à§à¦¯à¦¾à¦¨à¦­à¦¾à¦¸ à¦°à¦™à¦¿à¦¨ à¦¹à§‹à¦•à¥¤ ðŸƒ",
  16: "à¦¬à¦¿à¦•à§‡à¦² à§ªà¦Ÿà¦¾: à¦šà¦¾à§Ÿà§‡à¦° à¦•à¦¾à¦ªà§‡ à¦†à¦¡à§à¦¡à¦¾ à¦œà¦®à§à¦• à¦¬à¦¸à§‡à¦° à¦¶à§€à¦¤à¦² à¦¹à¦¾à¦“à§Ÿà¦¾à§Ÿà¥¤ â˜•",
  17: "à¦¬à¦¿à¦•à§‡à¦² à§«à¦Ÿà¦¾: à¦—à§‹à¦§à§‚à¦²à¦¿à¦° à¦†à¦•à¦¾à¦¶ à¦¬à¦²à¦›à§‡â€” à¦¦à¦¿à¦¨à§‡à¦° à¦¶à§‡à¦·à§‡ à¦œà§Ÿ à¦†à¦ªà¦¨à¦¾à¦°à¦‡à¥¤ ðŸŽ¨",
  18: "à¦¸à¦¨à§à¦§à§à¦¯à¦¾ à§¬à¦Ÿà¦¾: à¦•à§à¦²à¦¾à¦¨à§à¦¤à¦¿ à¦®à§à¦›à§‡ à¦˜à¦°à§‡ à¦†à¦¸à§à¦• à¦¸à§à¦¬à¦°à§à¦—à§€à§Ÿ à¦¶à¦¾à¦¨à§à¦¤à¦¿à¥¤ ðŸ ",
  19: "à¦¸à¦¨à§à¦§à§à¦¯à¦¾ à§­à¦Ÿà¦¾: à¦®à§‡à¦§à¦¾ à¦œà§à¦¬à¦²à§‡ à¦‰à¦ à§à¦• à¦œà§‹à¦¨à¦¾à¦•à¦¿à¦° à¦¸à§à¦¨à¦¿à¦—à§à¦§ à¦†à¦²à§‹à§Ÿà¥¤ ðŸ’¡",
  20: "à¦°à¦¾à¦¤ à§®à¦Ÿà¦¾: à¦ªà§à¦°à¦¿à§Ÿà¦œà¦¨à¦¦à§‡à¦° à¦¸à¦¾à¦¨à§à¦¨à¦¿à¦§à§à¦¯à§‡ à¦•à¦¾à¦Ÿà§à¦• à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾à¦° à¦®à§à¦¹à§‚à¦°à§à¦¤à¥¤ â¤ï¸",
  21: "à¦°à¦¾à¦¤ à§¯à¦Ÿà¦¾: à¦¡à¦¿à¦¨à¦¾à¦°à§‡à¦° à¦¤à§ƒà¦ªà§à¦¤à¦¿ à¦†à¦° à¦°à¦¾à¦¤à§‡à¦° à¦¶à¦¾à¦¨à§à¦¤à¦¿à¦¤à§‡ à¦¹à¦¾à¦°à¦¿à§Ÿà§‡ à¦¯à¦¾à¦¨à¥¤ ðŸ›",
  22: "à¦°à¦¾à¦¤ à§§à§¦à¦Ÿà¦¾: à¦•à¦¾à¦œ à¦¶à§‡à¦·? à¦à¦¬à¦¾à¦° à¦¨à¦¿à¦œà§‡à¦•à§‡ à¦¸à¦®à§Ÿ à¦¦à§‡à¦“à§Ÿà¦¾à¦° à¦°à¦¾à¦œà¦•à§€à§Ÿ à¦¸à¦®à§Ÿà¥¤ ðŸŽ§",
  23: "à¦°à¦¾à¦¤ à§§à§§à¦Ÿà¦¾: à¦¤à§ƒà¦ªà§à¦¤à¦¿à¦° à¦¶à§à¦¬à¦¾à¦¸ à¦¨à¦¿à§Ÿà§‡ à¦¬à¦²à§à¦¨â€” 'à¦†à¦œ à¦†à¦®à¦¿ à¦¸à§‡à¦°à¦¾à¦Ÿà¦¾ à¦¦à¦¿à§Ÿà§‡à¦›à¦¿'à¥¤ ðŸ†"
};

const startTime = Date.now();

module.exports.onLoad = ({ api }) => {
  const rule = new schedule.RecurrenceRule();
  rule.tz = 'Asia/Dhaka';
  rule.minute = 0; 

  schedule.scheduleJob(rule, async () => {
    try {
      const now = moment().tz('Asia/Dhaka');
      const time = now.format('hh:mm A');
      const date = now.format('DD/MM/YY');
      const hour = now.hour();

      // ðŸŒ¡ï¸ Weather System (Fix for Kurigram/Rowmari)
      let weather = "Error â˜ï¸";
      try {
        const res = await axios.get(`https://api.openweathermap.org/data/2.5/weather?lat=25.8103&lon=89.6487&units=metric&appid=e38b33e1d689b0284980484b9071060b`);
        weather = `${Math.round(res.data.main.temp)}Â°C | ${res.data.weather[0].main}`;
      } catch (e) { weather = "Signal Weak ðŸ“¡"; }

      // ðŸ•‹ Prayer Times
      let prayers = "Updating...";
      try {
        const pr = await axios.get(`https://api.aladhan.com/v1/timingsByCity?city=Kurigram&country=Bangladesh&method=2`);
        const p = pr.data.data.timings;
        prayers = `F:${p.Fajr} D:${p.Dhuhr} A:${p.Asr} M:${p.Maghrib} I:${p.Isha}`;
      } catch (e) {}

      // ðŸš€ Power Stats
      const uptime = moment.duration(Date.now() - startTime).format("D[d] H[h] m[m]");
      const ram = (process.memoryUsage().heapUsed / 1024 / 1024).toFixed(1);
      
      const msg = `ðŸ’  ð—¨ð—Ÿð—§ð—¥ð—”-ð—¡ð—˜ð—§ ð—Ÿð—œð—©ð—˜ ðŸ›°ï¸\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nðŸ•’ ð—§ð—¶ð—ºð—²: ${time} | ${date}\nðŸ“ ð—Ÿð—¼ð—°: Kurigram, Rowmari\nðŸŒ¡ï¸ ð—ªð˜ð—µð—¿: ${weather}\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nðŸ“œ ð— ð—¦ð—š: ${quotes[hour]}\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nðŸ•‹ ð—£ð—¿ð—®ð˜†: ${prayers}\nðŸš€ ð—¥ð—”ð— : ${ram}MB | âš¡ ð—¨ð—½: ${uptime}\nâœ… ð—¦ð˜ð—®ð˜ð˜‚ð˜€: Optimal Performance\nâ”„â”‰âˆâœ¡ï¸â‹†âƒà¦šà¦¾à¦à¦¦à§‡à¦¡à¦¼~à¦ªà¦¾à¦¹à¦¾à¦¡à¦¼âœ¿âƒðŸª¬âˆâ”‰â”„`;

      const allThreads = global.data.allThreadID || [];
      for (const threadID of allThreads) {
        api.sendMessage(msg, threadID);
        await new Promise(res => setTimeout(res, 300)); 
      }
    } catch (err) { console.error(err); }
  });
};

module.exports.run = () => {};
